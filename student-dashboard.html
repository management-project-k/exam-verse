<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0"
  />
  <title>Exam Verse | Student Dashboard</title>

  <!-- Icons + Fonts -->
  <link
    rel="stylesheet"
    href="https://maxst.icons8.com/vue-static/landings/line-awesome/line-awesome/1.3.0/css/line-awesome.min.css"
  />
  <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
  />

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --primary: #1a73e8;
      --dark-bg: #181818;
      --dark-card: #2c2c2c;
      --light-bg: #f5f5f5;
      --light-card: #ffffff;
      --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      --text-muted: #666;
    }

    body {
      font-family: "Poppins", sans-serif;
      background: var(--light-bg);
      color: #333;
      min-height: 100vh;
      transition: all 0.3s ease;
    }

    body.dark {
      background: var(--dark-bg);
      color: #fff;
    }

    /* Header */
    .header {
      position: fixed;
      top: 0;
      width: 100%;
      height: 60px;
      background: var(--light-card);
      border-bottom: 1px solid rgba(0, 0, 0, 0.08);
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 16px;
      z-index: 1000;
      box-shadow: var(--shadow);
    }

    body.dark .header {
      background: #1e1e1e;
      border-color: rgba(255, 255, 255, 0.08);
    }

    .brand {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .brand-row {
      display: flex;
      gap: 4px;
      align-items: baseline;
    }

    .brand-title {
      font-weight: 700;
      font-size: 18px;
      letter-spacing: 0.5px;
      color: var(--primary);
      text-shadow: 0 2px 8px rgba(26, 115, 232, 0.3);
    }

    .version-capsule {
      display: inline-block;
      padding: 3px 10px;
      background: rgba(26, 115, 232, 0.1);
      color: var(--primary);
      font-size: 10px;
      font-weight: 600;
      letter-spacing: 1.2px;
      text-transform: uppercase;
      border-radius: 999px;
    }

    .header-right {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .header-icon-wrapper {
      position: relative;
    }

    .header-icon {
      font-size: 22px;
      cursor: pointer;
      color: #666;
      transition: color 0.2s;
    }

    .header-icon:hover {
      color: var(--primary);
    }

    .badge {
      position: absolute;
      top: -4px;
      right: -6px;
      background: #dc3545;
      color: #fff;
      border-radius: 999px;
      min-width: 16px;
      height: 16px;
      padding: 0 4px;
      font-size: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
    }

    .avatar {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: var(--primary);
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      cursor: pointer;
      font-size: 16px;
      border: none;
    }

    /* Theme toggle */
    .theme-toggle {
      background: none;
      border: none;
      padding: 6px;
      cursor: pointer;
      border-radius: 999px;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      position: relative;
      transition: all 0.3s ease;
    }

    .theme-toggle:hover {
      background: rgba(26, 115, 232, 0.08);
      transform: scale(1.05);
    }

    .theme-icon {
      width: 22px;
      height: 22px;
      position: absolute;
      transition: all 0.35s ease;
      color: var(--primary);
    }

    .sun-icon {
      opacity: 1;
      transform: rotate(0deg) scale(1);
    }

    body.dark .sun-icon {
      opacity: 0;
      transform: rotate(180deg) scale(0.5);
    }

    .moon-icon {
      opacity: 0;
      transform: rotate(-180deg) scale(0.5);
    }

    body.dark .moon-icon {
      opacity: 1;
      transform: rotate(0deg) scale(1);
    }

    /* Layout */
    .main {
      margin-top: 60px;
      margin-bottom: 60px;
      padding: 16px;
      min-height: calc(100vh - 120px);
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
      animation: fadeIn 0.25s;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(4px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .card {
      background: var(--light-card);
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 16px;
      box-shadow: var(--shadow);
    }

    body.dark .card {
      background: var(--dark-card);
    }

    /* Welcome card */
    .welcome-card {
      background: linear-gradient(135deg, #1a73e8, #5b9ef5);
      color: #fff;
      border-radius: 16px;
      padding: 22px;
      margin-bottom: 18px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
    }

    .welcome-main {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .welcome-title {
      font-size: 22px;
      font-weight: 600;
    }

    .welcome-roll {
      font-size: 13px;
      opacity: 0.9;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .welcome-roll i {
      font-size: 16px;
    }

    .welcome-icon {
      width: 40px;
      height: 40px;
      border-radius: 12px;
      background: rgba(255, 255, 255, 0.15);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 22px;
    }

    /* Stats grids */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap: 10px;
      margin-bottom: 12px;
    }

    @media (max-width: 900px) {
      .stats-grid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    .stat-card {
      background: var(--light-card);
      border-radius: 12px;
      padding: 12px;
      box-shadow: var(--shadow);
      text-align: left;
      display: flex;
      flex-direction: column;
      gap: 4px;
      transition: transform 0.2s;
    }

    body.dark .stat-card {
      background: var(--dark-card);
    }

    .stat-card:hover {
      transform: translateY(-2px);
    }

    .stat-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.8px;
      color: var(--text-muted);
    }

    .stat-icon {
      font-size: 18px;
      color: var(--primary);
    }

    .stat-value {
      font-size: 20px;
      font-weight: 700;
      color: var(--primary);
    }

    .stat-sub {
      font-size: 11px;
      color: var(--text-muted);
    }

    /* Mini analytics */
    .mini-analytics {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 10px;
      margin-bottom: 16px;
    }

    @media (max-width: 900px) {
      .mini-analytics {
        grid-template-columns: repeat(1, minmax(0, 1fr));
      }
    }

    .mini-card {
      background: var(--light-card);
      border-radius: 12px;
      padding: 12px;
      box-shadow: var(--shadow);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    body.dark .mini-card {
      background: var(--dark-card);
    }

    .mini-icon {
      width: 32px;
      height: 32px;
      border-radius: 999px;
      background: rgba(26, 115, 232, 0.12);
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--primary);
      font-size: 16px;
    }

    .mini-content {
      flex: 1;
    }

    .mini-label {
      font-size: 11px;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.8px;
    }

    .mini-value {
      font-size: 16px;
      font-weight: 600;
    }

    /* Charts */
    .charts-grid {
      display: grid;
      grid-template-columns: minmax(0, 2fr) minmax(0, 1.5fr);
      gap: 12px;
      margin-bottom: 12px;
    }

    @media (max-width: 900px) {
      .charts-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .chart-container {
      height: 260px;
    }

    .chart-title {
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .chart-title i {
      color: var(--primary);
    }

    /* Bottom nav */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      height: 56px;
      background: var(--light-card);
      border-top: 1px solid rgba(0, 0, 0, 0.08);
      display: flex;
      align-items: center;
      justify-content: space-around;
      z-index: 1000;
    }

    body.dark .bottom-nav {
      background: #1e1e1e;
      border-color: rgba(255, 255, 255, 0.08);
    }

    .nav-item {
      flex: 1;
      text-align: center;
      font-size: 11px;
      color: #666;
      cursor: pointer;
      padding-top: 4px;
      background: none;
      border: none;
    }

    .nav-item i {
      display: block;
      font-size: 20px;
      margin-bottom: 2px;
    }

    .nav-item.active {
      color: var(--primary);
      font-weight: 600;
    }

    .nav-item.active i {
      color: var(--primary);
    }

    /* Footer */
    .footer {
      text-align: center;
      font-size: 12px;
      color: var(--text-muted);
      margin-top: 8px;
    }

    .footer a {
      color: var(--primary);
      text-decoration: none;
      font-weight: 500;
    }

    .footer a:hover {
      text-decoration: underline;
    }

    /* Tests tab */
    .tests-header h3 {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .tests-subtitle {
      font-size: 12px;
      color: var(--text-muted);
    }

    .tests-search-row {
      margin-top: 12px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .tests-search-wrapper {
      position: relative;
      flex: 1;
    }

    .tests-search-wrapper i {
      position: absolute;
      left: 12px;
      top: 11px;
      color: var(--text-muted);
    }

    .tests-search-input {
      width: 100%;
      padding: 10px 12px 10px 38px;
      border-radius: 10px;
      border: 2px solid rgba(0, 0, 0, 0.08);
      font-size: 14px;
      font-family: "Poppins", sans-serif;
      background: #f9f9f9;
    }

    body.dark .tests-search-input {
      background: #1e1e1e;
      border-color: #333;
      color: #fff;
    }

    .tests-quick-filters {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .tests-chip {
      border-radius: 999px;
      border: 1px solid var(--primary);
      background: transparent;
      color: var(--primary);
      padding: 6px 12px;
      font-size: 11px;
      font-weight: 500;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      transition: 0.2s;
    }

    .tests-chip i {
      font-size: 14px;
    }

    .tests-chip:hover,
    .tests-chip.active {
      background: var(--primary);
      color: #fff;
    }

    .tests-section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }

    .tests-section-header h4 {
      font-size: 14px;
      font-weight: 600;
    }

    .tests-section-header p {
      font-size: 12px;
      color: var(--text-muted);
    }

    .tests-view-all {
      border: none;
      background: rgba(26, 115, 232, 0.08);
      color: var(--primary);
      font-size: 11px;
      padding: 6px 12px;
      border-radius: 999px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
    }

    .tests-view-all i {
      font-size: 14px;
    }

    .tests-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .test-card {
      background: var(--light-card);
      border-radius: 10px;
      padding: 12px;
      box-shadow: var(--shadow);
      display: flex;
      flex-direction: column;
      gap: 6px;
      border-left: 3px solid var(--primary);
    }

    body.dark .test-card {
      background: var(--dark-card);
    }

    .test-top-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .test-title {
      font-size: 14px;
      font-weight: 600;
    }

    .test-id {
      font-size: 11px;
      color: var(--text-muted);
    }

    .test-meta-row {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      font-size: 11px;
      color: var(--text-muted);
    }

    .test-meta-pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .test-meta-pill i {
      font-size: 13px;
    }

    .test-bottom-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 4px;
      font-size: 11px;
    }

    .test-difficulty-pill {
      padding: 3px 8px;
      border-radius: 999px;
      font-weight: 600;
      text-transform: capitalize;
    }

    .test-difficulty-easy {
      background: rgba(52, 199, 89, 0.12);
      color: #34c759;
    }

    .test-difficulty-medium {
      background: rgba(251, 188, 5, 0.12);
      color: #fbbc05;
    }

    .test-difficulty-hard {
      background: rgba(234, 67, 53, 0.12);
      color: #ea4335;
    }

    .test-btn-primary {
      border: none;
      background: var(--primary);
      color: #fff;
      padding: 7px 14px;
      border-radius: 8px;
      font-size: 12px;
      font-weight: 600;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .test-btn-primary i {
      font-size: 14px;
    }

    .tests-empty {
      align-items: center;
      text-align: center;
      border-left: none;
    }

    .tests-empty-icon {
      font-size: 24px;
      color: var(--text-muted);
      margin-bottom: 4px;
    }

    .tests-empty-text {
      font-size: 12px;
      color: var(--text-muted);
    }

    .profile-title {
      margin-bottom: 10px;
    }

    .profile-logout-button {
      margin-top: 12px;
    }
  </style>
</head>
<body>
  <!-- HEADER -->
  <header class="header">
    <div class="brand">
      <div class="brand-row">
        <span class="brand-title">Exam</span>
        <span class="brand-title">Verse</span>
      </div>
      <span class="version-capsule">Version 1.0</span>
    </div>
    <div class="header-right">
      <div class="header-icon-wrapper">
        <button
          id="notificationButton"
          class="icon-button"
          type="button"
          aria-label="Open notifications"
          style="background:none;border:none;padding:0;"
        >
          <i class="las la-bell header-icon" aria-hidden="true"></i>
          <span class="badge" id="notificationBadge">3</span>
        </button>
      </div>

      <button
        id="themeToggleButton"
        class="theme-toggle"
        type="button"
        aria-label="Toggle theme"
      >
        <svg
          class="theme-icon sun-icon"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          stroke-width="2"
          aria-hidden="true"
        >
          <circle cx="12" cy="12" r="5" />
          <line x1="12" y1="1" x2="12" y2="3" />
          <line x1="12" y1="21" x2="12" y2="23" />
          <line x1="4.22" y1="4.22" x2="5.64" y2="5.64" />
          <line x1="18.36" y1="18.36" x2="19.78" y2="19.78" />
          <line x1="1" y1="12" x2="3" y2="12" />
          <line x1="21" y1="12" x2="23" y2="12" />
          <line x1="4.22" y1="19.78" x2="5.64" y2="18.36" />
          <line x1="18.36" y1="5.64" x2="19.78" y2="4.22" />
        </svg>
        <svg
          class="theme-icon moon-icon"
          xmlns="http://www.w3.org/2000/svg"
          fill="currentColor"
          viewBox="0 0 24 24"
          aria-hidden="true"
        >
          <path
            d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"
          />
        </svg>
      </button>

      <button
        id="profileAvatarButton"
        class="avatar"
        type="button"
        aria-label="Open profile tab"
      >
        <span id="userInitial">S</span>
      </button>
    </div>
  </header>

  <!-- MAIN -->
  <main class="main">
    <!-- HOME TAB -->
    <section
      id="homeTab"
      class="tab-content active"
      role="tabpanel"
      aria-labelledby="tab-home"
      tabindex="0"
    >
      <div class="welcome-card">
        <div class="welcome-main">
          <div class="welcome-title">
            Welcome, <span id="userName">Student</span>!
          </div>
          <div class="welcome-roll">
            <i class="las la-id-card" aria-hidden="true"></i>
            <span id="userRoll">RollNumber</span>
          </div>
        </div>
        <div class="welcome-icon" aria-hidden="true">
          <i class="las la-graduation-cap"></i>
        </div>
      </div>

      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-header">
            <span>Total Tests</span>
            <i class="las la-clipboard-list stat-icon" aria-hidden="true"></i>
          </div>
          <div class="stat-value" id="statTestsCompleted">0</div>
          <div class="stat-sub">Completed</div>
        </div>

        <div class="stat-card">
          <div class="stat-header">
            <span>Average Score</span>
            <i class="las la-chart-bar stat-icon" aria-hidden="true"></i>
          </div>
          <div class="stat-value" id="statAverageScore">0.0</div>
          <div class="stat-sub">Overall</div>
        </div>

        <div class="stat-card">
          <div class="stat-header">
            <span>Global Rank</span>
            <i class="las la-trophy stat-icon" aria-hidden="true"></i>
          </div>
          <div class="stat-value" id="statGlobalRank">--</div>
          <div class="stat-sub">Leaderboard</div>
        </div>

        <div class="stat-card">
          <div class="stat-header">
            <span>Answer Accuracy</span>
            <i class="las la-bullseye stat-icon" aria-hidden="true"></i>
          </div>
          <div class="stat-value" id="statAnswerAccuracy">0</div>
          <div class="stat-sub">Correct answers</div>
        </div>
      </div>

      <div class="mini-analytics">
        <div class="mini-card">
          <div class="mini-icon" aria-hidden="true">
            <i class="las la-star"></i>
          </div>
          <div class="mini-content">
            <div class="mini-label">Best Score</div>
            <div class="mini-value" id="miniBestScoreValue">0</div>
          </div>
        </div>

        <div class="mini-card">
          <div class="mini-icon" aria-hidden="true">
            <i class="las la-bolt"></i>
          </div>
          <div class="mini-content">
            <div class="mini-label">Last Test</div>
            <div class="mini-value" id="miniLastTestScore">0</div>
          </div>
        </div>

        <div class="mini-card">
          <div class="mini-icon" aria-hidden="true">
            <i class="las la-fire"></i>
          </div>
          <div class="mini-content">
            <div class="mini-label">Daily Streak</div>
            <div class="mini-value" id="miniDailyStreak">0 days</div>
          </div>
        </div>
      </div>

      <div class="charts-grid">
        <div class="card">
          <div class="chart-title">
            <i class="las la-wave-square" aria-hidden="true"></i>
            <span>Recent Test Scores</span>
          </div>
          <div class="chart-container">
            <canvas id="recentScoresChartCanvas"></canvas>
          </div>
        </div>

        <div class="card">
          <div class="chart-title">
            <i class="las la-sitemap" aria-hidden="true"></i>
            <span>Test Difficulty Distribution</span>
          </div>
          <div class="chart-container">
            <canvas id="difficultyDistributionChartCanvas"></canvas>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="chart-title">
          <i class="las la-layer-group" aria-hidden="true"></i>
          <span>Subject Performance</span>
        </div>
        <div class="chart-container">
          <canvas id="subjectPerformanceChartCanvas"></canvas>
        </div>
      </div>

      <div class="footer">
        Designed &amp; Developed by
        <a
          href="https://www.project-k.co.in"
          target="_blank"
          rel="noopener noreferrer"
          >Project K</a
        >
      </div>
    </section>

    <!-- TESTS TAB -->
    <section
      id="testsTab"
      class="tab-content"
      role="tabpanel"
      aria-labelledby="tab-tests"
      tabindex="0"
    >
      <div class="card">
        <div class="tests-header">
          <h3>Mock Tests</h3>
          <span class="tests-subtitle"
            >Plan, attempt, and review your exams in one place.</span
          >
        </div>

        <div class="tests-search-row">
          <div class="tests-search-wrapper">
            <i class="las la-search" aria-hidden="true"></i>
            <input
              type="text"
              id="testSearchInput"
              class="tests-search-input"
              placeholder="Search by test name, subject, or ID..."
              autocomplete="off"
              aria-label="Search tests by name, subject, or ID"
            />
          </div>

          <div
            class="tests-quick-filters"
            aria-label="Difficulty filters"
          >
            <button
              class="tests-chip active"
              type="button"
              data-filter="all"
            >
              <i class="las la-layer-group" aria-hidden="true"></i>
              <span>All</span>
            </button>
            <button
              class="tests-chip"
              type="button"
              data-filter="easy"
            >
              <i class="las la-smile" aria-hidden="true"></i>
              <span>Easy</span>
            </button>
            <button
              class="tests-chip"
              type="button"
              data-filter="medium"
            >
              <i class="las la-adjust" aria-hidden="true"></i>
              <span>Medium</span>
            </button>
            <button
              class="tests-chip"
              type="button"
              data-filter="hard"
            >
              <i class="las la-fire" aria-hidden="true"></i>
              <span>Hard</span>
            </button>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="tests-section-header">
          <div>
            <h4>Upcoming Tests</h4>
            <p id="upcomingSubtitle">Ready to attempt.</p>
          </div>
          <button
            id="reloadTestsButton"
            class="tests-view-all"
            type="button"
          >
            <i class="las la-sync-alt" aria-hidden="true"></i>
            <span>Refresh</span>
          </button>
        </div>
        <div id="upcomingTestsList" class="tests-list">
          <div
            class="test-card tests-empty"
            id="upcomingEmptyStateCard"
          >
            <div class="tests-empty-icon" aria-hidden="true">
              <i class="las la-inbox"></i>
            </div>
            <div class="tests-empty-text">
              No upcoming tests assigned yet.
            </div>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="tests-section-header">
          <div>
            <h4>Completed Tests</h4>
            <p id="completedSubtitle">Your recent performance.</p>
          </div>
        </div>
        <div id="completedTestsList" class="tests-list">
          <div
            class="test-card tests-empty"
            id="completedEmptyStateCard"
          >
            <div class="tests-empty-icon" aria-hidden="true">
              <i class="las la-clipboard-check"></i>
            </div>
            <div class="tests-empty-text">
              You haven't completed any tests yet.
            </div>
          </div>
        </div>
      </div>

      <div class="footer">
        Designed &amp; Developed by
        <a
          href="https://www.project-k.co.in"
          target="_blank"
          rel="noopener noreferrer"
          >Project K</a
        >
      </div>
    </section>

    <!-- OTHER TABS -->
    <section
      id="leaderboardTab"
      class="tab-content"
      role="tabpanel"
      aria-labelledby="tab-leaderboard"
      tabindex="0"
    >
      <div class="card">
        Leaderboard tab content coming next.
      </div>
    </section>

    <section
      id="mediaTab"
      class="tab-content"
      role="tabpanel"
      aria-labelledby="tab-media"
      tabindex="0"
    >
      <div class="card">
        Media Feed tab content coming next.
      </div>
    </section>

    <section
      id="profileTab"
      class="tab-content"
      role="tabpanel"
      aria-labelledby="tab-profile"
      tabindex="0"
    >
      <div class="card">
        <h3 class="profile-title">Profile</h3>
        <p>
          Name:
          <span id="profileName">Student</span>
        </p>
        <p>
          Roll Number:
          <span id="profileRollNumber">RollNumber</span>
        </p>
        <button
          id="logoutButton"
          class="test-btn-primary profile-logout-button"
          type="button"
        >
          Logout
        </button>
      </div>
    </section>
  </main>

  <!-- BOTTOM NAV -->
  <nav
    class="bottom-nav"
    role="tablist"
    aria-label="Main sections"
  >
    <button
      id="tab-home"
      class="nav-item active"
      type="button"
      role="tab"
      aria-selected="true"
      aria-controls="homeTab"
      data-tab="home"
    >
      <i class="las la-home" aria-hidden="true"></i>
      <span>Home</span>
    </button>
    <button
      id="tab-tests"
      class="nav-item"
      type="button"
      role="tab"
      aria-selected="false"
      aria-controls="testsTab"
      data-tab="tests"
    >
      <i class="las la-clipboard-list" aria-hidden="true"></i>
      <span>Tests</span>
    </button>
    <button
      id="tab-leaderboard"
      class="nav-item"
      type="button"
      role="tab"
      aria-selected="false"
      aria-controls="leaderboardTab"
      data-tab="leaderboard"
    >
      <i class="las la-trophy" aria-hidden="true"></i>
      <span>Rank</span>
    </button>
    <button
      id="tab-media"
      class="nav-item"
      type="button"
      role="tab"
      aria-selected="false"
      aria-controls="mediaTab"
      data-tab="media"
    >
      <i class="las la-stream" aria-hidden="true"></i>
      <span>Media</span>
    </button>
    <button
      id="tab-profile"
      class="nav-item"
      type="button"
      role="tab"
      aria-selected="false"
      aria-controls="profileTab"
      data-tab="profile"
    >
      <i class="las la-user" aria-hidden="true"></i>
      <span>Profile</span>
    </button>
  </nav>

  <script>
    "use strict";

    // THEME + SESSION (front-end only; no real auth here)
    let isDarkTheme = window.localStorage.getItem("theme") === "dark";
    if (isDarkTheme) {
      document.body.classList.add("dark");
    }

    // SAMPLE STUDENT (replace when connecting login.html)
    const currentStudentObject = {
      Name: "RangSwamy",
      Username: "rswamy",
      RollNumber: "23022-CM-032"
    };

    // ===== SAMPLE MOCK TESTS DATA (front-end only) =====
    const SAMPLE_TESTS = {
      upcoming: [
        {
          testId: "EV-OS-UT1",
          testName: "OS - CPU Scheduling (Unit Test 1)",
          subject: "Operating Systems",
          category: "Semester 3 Â· CME",
          duration: 30,
          totalQuestions: 20,
          difficulty: "medium",
          scheduledAt: "2025-11-20T09:30:00Z",
          createdByName: "CME Dept."
        },
        {
          testId: "EV-DBMS-QUIZ2",
          testName: "DBMS - Normalization Quiz",
          subject: "DBMS",
          category: "Quick Quiz",
          duration: 15,
          totalQuestions: 10,
          difficulty: "easy",
          scheduledAt: "2025-11-21T17:00:00Z",
          createdByName: "DBMS Faculty"
        },
        {
          testId: "EV-DSA-PRACTICE1",
          testName: "DSA - Stacks & Queues (Practice)",
          subject: "Data Structures through C",
          category: "Practice Set",
          duration: 40,
          totalQuestions: 25,
          difficulty: "hard",
          scheduledAt: "2025-11-23T08:00:00Z",
          createdByName: "CME Dept."
        }
      ],
      completed: [
        {
          testId: "EV-OS-PROC",
          testName: "OS - Process Management",
          subject: "Operating Systems",
          difficulty: "medium",
          score: 18,
          totalQuestions: 25,
          percentage: 72.0,
          rank: 15,
          attemptedAt: "2025-11-10T10:00:00Z"
        },
        {
          testId: "EV-DBMS-JOINS",
          testName: "DBMS - Joins & Subqueries",
          subject: "DBMS",
          difficulty: "easy",
          score: 23,
          totalQuestions: 25,
          percentage: 92.0,
          rank: 5,
          attemptedAt: "2025-11-12T09:45:00Z"
        },
        {
          testId: "EV-DSA-ARRAYS",
          testName: "DSA - Arrays & Searching",
          subject: "Data Structures through C",
          difficulty: "medium",
          score: 21,
          totalQuestions: 30,
          percentage: 70.0,
          rank: 22,
          attemptedAt: "2025-11-15T16:00:00Z"
        }
      ]
    };

    // ----- HELPERS -----
    function byId(id) {
      return document.getElementById(id);
    }

    function formatDateTime(isoString) {
      if (!isoString) return "";
      const d = new Date(isoString);
      return d.toLocaleString(undefined, {
        day: "2-digit",
        month: "short",
        hour: "2-digit",
        minute: "2-digit"
      });
    }

    function difficultyCssClass(testDifficulty) {
      const normalized = String(testDifficulty || "")
        .toLowerCase()
        .trim();
      if (normalized === "easy") return "test-difficulty-easy";
      if (normalized === "hard") return "test-difficulty-hard";
      return "test-difficulty-medium";
    }

    function debounce(fn, delayMs) {
      let timer;
      return (...args) => {
        clearTimeout(timer);
        timer = setTimeout(() => fn(...args), delayMs);
      };
    }

    // ----- STATE -----
    let recentScoresChart = null;
    let difficultyDistributionChart = null;
    let subjectPerformanceChart = null;

    let testsDataObject = {
      upcoming: [...SAMPLE_TESTS.upcoming],
      completed: [...SAMPLE_TESTS.completed]
    };

    let currentDifficultyFilter = "all";

    // ----- INIT -----
    window.addEventListener("load", initialize);

    function initialize() {
      setStudentIdentity();
      initializeChartsWithSamples();
      initializeEventListeners();
      loadOverviewFromSamples();
      loadTestsFromSamples();
    }

    function setStudentIdentity() {
      const studentName =
        currentStudentObject.Name ||
        currentStudentObject.Username ||
        currentStudentObject.RollNumber ||
        "Student";
      const studentRollNumber =
        currentStudentObject.RollNumber || "RollNumber";
      const studentInitial =
        studentName.charAt(0).toUpperCase() || "S";

      const userNameElement = byId("userName");
      const userRollElement = byId("userRoll");
      const userInitialElement = byId("userInitial");
      const profileNameElement = byId("profileName");
      const profileRollNumberElement = byId("profileRollNumber");

      if (userNameElement) userNameElement.textContent = studentName;
      if (userRollElement)
        userRollElement.textContent = studentRollNumber;
      if (userInitialElement)
        userInitialElement.textContent = studentInitial;

      if (profileNameElement)
        profileNameElement.textContent = studentName;
      if (profileRollNumberElement)
        profileRollNumberElement.textContent = studentRollNumber;
    }

    // ----- THEME + NAV + LOGOUT -----
    function handleThemeToggleClick() {
      isDarkTheme = !isDarkTheme;
      document.body.classList.toggle("dark", isDarkTheme);
      window.localStorage.setItem(
        "theme",
        isDarkTheme ? "dark" : "light"
      );
    }

    function handleNotificationClick() {
      window.alert(
        "Notification center will show your test reminders and updates here."
      );
    }

    function handleLogoutClick() {
      const isConfirmed = window.confirm(
        "Are you sure you want to logout?"
      );
      if (!isConfirmed) return;
      window.sessionStorage.clear();
      window.localStorage.removeItem("studentData");
      window.location.href = "login.html";
    }

    function switchTab(tabKey) {
      document
        .querySelectorAll(".tab-content")
        .forEach((el) => el.classList.remove("active"));

      const tabElement = byId(`${tabKey}Tab`);
      if (tabElement) {
        tabElement.classList.add("active");
        tabElement.focus();
      }

      const bottomNavItems = document.querySelectorAll(
        ".bottom-nav .nav-item"
      );
      bottomNavItems.forEach((navItem) => {
        navItem.classList.remove("active");
        navItem.setAttribute("aria-selected", "false");
      });

      const tabIndexMap = {
        home: 0,
        tests: 1,
        leaderboard: 2,
        media: 3,
        profile: 4
      };
      const index = tabIndexMap[tabKey];
      if (index != null && bottomNavItems[index]) {
        const navItem = bottomNavItems[index];
        navItem.classList.add("active");
        navItem.setAttribute("aria-selected", "true");
      }

      window.scrollTo({
        top: 0,
        behavior: "smooth"
      });
    }

    // ----- EVENT LISTENERS -----
    function initializeEventListeners() {
      const themeToggleButton = byId("themeToggleButton");
      const notificationButton = byId("notificationButton");
      const profileAvatarButton = byId("profileAvatarButton");
      const logoutButton = byId("logoutButton");
      const reloadTestsButton = byId("reloadTestsButton");
      const testSearchInput = byId("testSearchInput");

      if (themeToggleButton) {
        themeToggleButton.addEventListener(
          "click",
          handleThemeToggleClick
        );
      }

      if (notificationButton) {
        notificationButton.addEventListener(
          "click",
          handleNotificationClick
        );
      }

      if (profileAvatarButton) {
        profileAvatarButton.addEventListener("click", () =>
          switchTab("profile")
        );
      }

      if (logoutButton) {
        logoutButton.addEventListener("click", handleLogoutClick);
      }

      if (reloadTestsButton) {
        reloadTestsButton.addEventListener("click", loadTestsFromSamples);
      }

      if (testSearchInput) {
        const debouncedSearch = debounce(searchTests, 200);
        testSearchInput.addEventListener("input", debouncedSearch);
      }

      document
        .querySelectorAll(".tests-chip[data-filter]")
        .forEach((buttonElement) => {
          buttonElement.addEventListener("click", () => {
            const difficultyKey =
              buttonElement.getAttribute("data-filter") || "all";
            filterByDifficulty(difficultyKey);
          });
        });

      document
        .querySelectorAll(".bottom-nav .nav-item")
        .forEach((navItem) => {
          navItem.addEventListener("click", () => {
            const tabKey = navItem.getAttribute("data-tab") || "home";
            switchTab(tabKey);
          });
        });

      const upcomingTestsList = byId("upcomingTestsList");
      const completedTestsList = byId("completedTestsList");

      if (upcomingTestsList) {
        upcomingTestsList.addEventListener(
          "click",
          handleTestsListClick
        );
      }
      if (completedTestsList) {
        completedTestsList.addEventListener(
          "click",
          handleTestsListClick
        );
      }
    }

    // ----- OVERVIEW FROM SAMPLE DATA -----
    function initializeChartsWithEmptyData() {
      const defaultLabels = ["Test 1", "Test 2", "Test 3", "Test 4", "Test 5"];
      const zeroValues = [0, 0, 0, 0, 0];

      renderRecentScoresChart(defaultLabels, zeroValues);
      renderDifficultyDistributionChart(0, 0, 0);
      renderSubjectPerformanceChart();
    }

    function initializeChartsWithSamples() {
      initializeChartsWithEmptyData();
    }

    function loadOverviewFromSamples() {
      const completed = SAMPLE_TESTS.completed;

      const totalTests = completed.length;
      const percentages = completed.map((t) => t.percentage || 0);
      const avgScore =
        percentages.length
          ? percentages.reduce((a, b) => a + b, 0) / percentages.length
          : 0;
      const bestScore =
        percentages.length ? Math.max(...percentages) : 0;

      const accuracy = Math.round(avgScore); // simple approx
      const rank = 12;
      const streakDays = 3;

      const difficulties = completed.map((t) =>
        String(t.difficulty || "").toLowerCase().trim()
      );
      const distribution = {
        easy: difficulties.filter((d) => d === "easy").length,
        medium: difficulties.filter((d) => d === "medium").length,
        hard: difficulties.filter((d) => d === "hard").length
      };

      const totalTestsElement = byId("statTestsCompleted");
      const avgScoreElement = byId("statAverageScore");
      const rankElement = byId("statGlobalRank");
      const accuracyElement = byId("statAnswerAccuracy");
      const bestScoreElement = byId("miniBestScoreValue");
      const lastTestScoreElement = byId("miniLastTestScore");
      const streakElement = byId("miniDailyStreak");

      if (totalTestsElement) {
        totalTestsElement.textContent = String(totalTests);
      }

      if (avgScoreElement) {
        avgScoreElement.textContent = avgScore.toFixed(1);
      }

      if (rankElement) {
        rankElement.textContent = rank;
      }

      if (accuracyElement) {
        accuracyElement.textContent = accuracy;
      }

      if (bestScoreElement) {
        bestScoreElement.textContent = bestScore.toFixed(1);
      }

      const lastTestRecord = completed[completed.length - 1];
      if (lastTestScoreElement) {
        if (lastTestRecord && typeof lastTestRecord.percentage === "number") {
          lastTestScoreElement.textContent =
            lastTestRecord.percentage.toFixed(1);
        } else {
          lastTestScoreElement.textContent = "0";
        }
      }

      if (streakElement) {
        streakElement.textContent = `${streakDays} days`;
      }

      const labels =
        completed.length > 0
          ? completed.map((t) => t.testId)
          : ["Test 1", "Test 2", "Test 3", "Test 4", "Test 5"];
      const scores =
        completed.length > 0
          ? completed.map((t) => t.percentage || 0)
          : [0, 0, 0, 0, 0];

      renderRecentScoresChart(labels, scores);
      renderDifficultyDistributionChart(
        distribution.easy,
        distribution.medium,
        distribution.hard
      );

      renderSubjectPerformanceChart();
    }

    // ----- CHART RENDERERS -----
    function renderRecentScoresChart(labels, dataPoints) {
      const canvas = byId("recentScoresChartCanvas");
      if (!canvas || !window.Chart) return;

      const ctx = canvas.getContext("2d");
      if (!ctx) return;

      if (recentScoresChart) {
        recentScoresChart.destroy();
      }

      recentScoresChart = new window.Chart(ctx, {
        type: "line",
        data: {
          labels,
          datasets: [
            {
              label: "Score",
              data: dataPoints,
              borderColor: "#1a73e8",
              backgroundColor: "rgba(26,115,232,0.1)",
              tension: 0.4,
              fill: true,
              pointRadius: 3
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              display: false
            }
          },
          scales: {
            y: {
              min: 0,
              max: 100,
              ticks: {
                stepSize: 20
              }
            }
          }
        }
      });
    }

    function renderDifficultyDistributionChart(
      easyCount,
      mediumCount,
      hardCount
    ) {
      const canvas = byId("difficultyDistributionChartCanvas");
      if (!canvas || !window.Chart) return;

      const ctx = canvas.getContext("2d");
      if (!ctx) return;

      if (difficultyDistributionChart) {
        difficultyDistributionChart.destroy();
      }

      difficultyDistributionChart = new window.Chart(ctx, {
        type: "doughnut",
        data: {
          labels: ["Easy", "Medium", "Hard"],
          datasets: [
            {
              data: [easyCount, mediumCount, hardCount],
              backgroundColor: ["#34c759", "#fbbc05", "#ea4335"]
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              position: "bottom",
              labels: {
                boxWidth: 14,
                font: {
                  size: 11
                }
              }
            }
          },
          cutout: "60%"
        }
      });
    }

    function renderSubjectPerformanceChart() {
      const canvas = byId("subjectPerformanceChartCanvas");
      if (!canvas || !window.Chart) return;

      const ctx = canvas.getContext("2d");
      if (!ctx) return;

      if (subjectPerformanceChart) {
        subjectPerformanceChart.destroy();
      }

      const subjects = [
        "OS",
        "DBMS",
        "DSA",
        "Networks",
        "SE"
      ];
      const values = [78, 92, 70, 0, 0]; // sample

      subjectPerformanceChart = new window.Chart(ctx, {
        type: "bar",
        data: {
          labels: subjects,
          datasets: [
            {
              label: "Score",
              data: values,
              backgroundColor: "#1a73e8"
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              display: false
            }
          },
          scales: {
            y: {
              min: 0,
              max: 100,
              ticks: {
                stepSize: 20
              }
            }
          }
        }
      });
    }

    // ----- TESTS RENDERING FROM SAMPLE DATA -----
    function loadTestsFromSamples() {
      testsDataObject.upcoming = [...SAMPLE_TESTS.upcoming];
      testsDataObject.completed = [...SAMPLE_TESTS.completed];
      renderTestsLists();
    }

    function filterTestsByDifficultyOnly(testList) {
      if (currentDifficultyFilter === "all") return testList;
      return testList.filter((test) => {
        return (
          String(test.difficulty || "")
            .toLowerCase()
            .trim() === currentDifficultyFilter
        );
      });
    }

    function renderTestsLists() {
      const upcomingContainer = byId("upcomingTestsList");
      const completedContainer = byId("completedTestsList");
      const upcomingEmptyCard = byId("upcomingEmptyStateCard");
      const completedEmptyCard = byId("completedEmptyStateCard");

      if (!upcomingContainer || !completedContainer) return;

      upcomingContainer.innerHTML = "";
      completedContainer.innerHTML = "";

      const filteredUpcomingTests = filterTestsByDifficultyOnly(
        testsDataObject.upcoming
      );
      const filteredCompletedTests = filterTestsByDifficultyOnly(
        testsDataObject.completed
      );

      if (!filteredUpcomingTests.length) {
        if (upcomingEmptyCard) {
          upcomingContainer.appendChild(upcomingEmptyCard);
        }
      } else {
        filteredUpcomingTests.forEach((testObject) => {
          upcomingContainer.appendChild(
            buildUpcomingTestCard(testObject)
          );
        });
      }

      if (!filteredCompletedTests.length) {
        if (completedEmptyCard) {
          completedContainer.appendChild(completedEmptyCard);
        }
      } else {
        filteredCompletedTests.forEach((testObject) => {
          completedContainer.appendChild(
            buildCompletedTestCard(testObject)
          );
        });
      }

      const upcomingSubtitleElement = byId("upcomingSubtitle");
      const completedSubtitleElement = byId("completedSubtitle");

      if (upcomingSubtitleElement) {
        upcomingSubtitleElement.textContent = filteredUpcomingTests.length
          ? `${filteredUpcomingTests.length} tests scheduled`
          : "Ready to attempt.";
      }

      if (completedSubtitleElement) {
        completedSubtitleElement.textContent = filteredCompletedTests.length
          ? `${filteredCompletedTests.length} tests completed recently`
          : "Your recent performance.";
      }
    }

    function buildUpcomingTestCard(testObject) {
      const cardElement = document.createElement("div");
      cardElement.className = "test-card";
      cardElement.dataset.testId = testObject.testId;

      const createdBy = testObject.createdByName || "Lecturer";

      cardElement.innerHTML = `
        <div class="test-top-row">
          <div>
            <div class="test-title">
              ${testObject.testName || "Untitled Test"}
            </div>
            <div class="test-id">${testObject.testId || ""}</div>
          </div>
          <div>
            <button
              class="test-btn-primary js-start-test"
              type="button"
              data-test-id="${testObject.testId || ""}"
            >
              Start Test
              <i class="las la-arrow-right" aria-hidden="true"></i>
            </button>
          </div>
        </div>
        <div class="test-meta-row">
          <span class="test-meta-pill">
            <i class="las la-book" aria-hidden="true"></i>
            <span>${testObject.subject || "General"}</span>
          </span>
          <span class="test-meta-pill">
            <i class="las la-clock" aria-hidden="true"></i>
            <span>${testObject.duration || 0} min</span>
          </span>
          <span class="test-meta-pill">
            <i class="las la-list" aria-hidden="true"></i>
            <span>${testObject.totalQuestions || 0} questions</span>
          </span>
          ${
            testObject.category
              ? `
          <span class="test-meta-pill">
            <i class="las la-layer-group" aria-hidden="true"></i>
            <span>${testObject.category}</span>
          </span>`
              : ""
          }
          ${
            testObject.scheduledAt
              ? `
          <span class="test-meta-pill">
            <i class="las la-calendar" aria-hidden="true"></i>
            <span>${formatDateTime(testObject.scheduledAt)}</span>
          </span>`
              : ""
          }
        </div>
        <div class="test-bottom-row">
          <span class="test-difficulty-pill ${difficultyCssClass(
            testObject.difficulty
          )}">
            ${testObject.difficulty || "Medium"}
          </span>
          <span style="color: var(--text-muted);">
            Created by ${createdBy}
          </span>
        </div>
      `;

      return cardElement;
    }

    function buildCompletedTestCard(testObject) {
      const cardElement = document.createElement("div");
      cardElement.className = "test-card";
      cardElement.dataset.testId = testObject.testId;

      const percentage =
        typeof testObject.percentage === "number"
          ? testObject.percentage.toFixed(1)
          : "0.0";
      const scoreText = `${testObject.score || 0} / ${
        testObject.totalQuestions || 0
      }`;

      cardElement.innerHTML = `
        <div class="test-top-row">
          <div>
            <div class="test-title">
              ${testObject.testName || "Completed Test"}
            </div>
            <div class="test-id">${testObject.testId || ""}</div>
          </div>
          <div style="text-align:right;">
            <div class="test-title" style="color: var(--primary);">
              ${percentage}%
            </div>
            <div class="test-id">
              Score ${scoreText}
            </div>
          </div>
        </div>
        <div class="test-meta-row">
          <span class="test-meta-pill">
            <i class="las la-book" aria-hidden="true"></i>
            <span>${testObject.subject || "General"}</span>
          </span>
          <span class="test-meta-pill">
            <i class="las la-trophy" aria-hidden="true"></i>
            <span>Rank ${testObject.rank != null ? testObject.rank : "--"}</span>
          </span>
          ${
            testObject.attemptedAt
              ? `
          <span class="test-meta-pill">
            <i class="las la-history" aria-hidden="true"></i>
            <span>${formatDateTime(testObject.attemptedAt)}</span>
          </span>`
              : ""
          }
        </div>
        <div class="test-bottom-row">
          <span class="test-difficulty-pill ${difficultyCssClass(
            testObject.difficulty
          )}">
            ${testObject.difficulty || "Medium"}
          </span>
          <button
            class="test-btn-primary js-view-analysis"
            type="button"
            data-test-id="${testObject.testId || ""}"
          >
            View Analysis
            <i class="las la-chart-line" aria-hidden="true"></i>
          </button>
        </div>
      `;

      return cardElement;
    }

    function searchTests() {
      const searchInputElement = byId("testSearchInput");
      const searchQuery = (searchInputElement?.value || "")
        .toLowerCase()
        .trim();

      if (!searchQuery) {
        renderTestsLists();
        return;
      }

      const matchesSearchQuery = (testObject) => {
        const compositeString = [
          testObject.testName,
          testObject.subject,
          testObject.testId,
          testObject.category
        ]
          .filter(Boolean)
          .join(" ")
          .toLowerCase();
        return compositeString.includes(searchQuery);
      };

      const filteredUpcomingTests = filterTestsByDifficultyOnly(
        testsDataObject.upcoming
      ).filter(matchesSearchQuery);

      const filteredCompletedTests = filterTestsByDifficultyOnly(
        testsDataObject.completed
      ).filter(matchesSearchQuery);

      const upcomingContainer = byId("upcomingTestsList");
      const completedContainer = byId("completedTestsList");
      const upcomingEmptyCard = byId("upcomingEmptyStateCard");
      const completedEmptyCard = byId("completedEmptyStateCard");

      if (!upcomingContainer || !completedContainer) return;

      upcomingContainer.innerHTML = "";
      completedContainer.innerHTML = "";

      if (!filteredUpcomingTests.length) {
        if (upcomingEmptyCard) {
          upcomingContainer.appendChild(upcomingEmptyCard);
        }
      } else {
        filteredUpcomingTests.forEach((testObject) => {
          upcomingContainer.appendChild(
            buildUpcomingTestCard(testObject)
          );
        });
      }

      if (!filteredCompletedTests.length) {
        if (completedEmptyCard) {
          completedContainer.appendChild(completedEmptyCard);
        }
      } else {
        filteredCompletedTests.forEach((testObject) => {
          completedContainer.appendChild(
            buildCompletedTestCard(testObject)
          );
        });
      }
    }

    function filterByDifficulty(difficultyKey) {
      currentDifficultyFilter = difficultyKey;

      document
        .querySelectorAll(".tests-chip[data-filter]")
        .forEach((buttonElement) => {
          const isActive =
            buttonElement.getAttribute("data-filter") ===
            difficultyKey;
          if (isActive) {
            buttonElement.classList.add("active");
          } else {
            buttonElement.classList.remove("active");
          }
        });

      searchTests();
    }

    function handleTestsListClick(event) {
      const target = event.target;
      if (!(target instanceof HTMLElement)) return;

      const startButton = target.closest(".js-start-test");
      if (startButton) {
        const testId = startButton.getAttribute("data-test-id");
        startTest(testId);
        return;
      }

      const viewButton = target.closest(".js-view-analysis");
      if (viewButton) {
        const testId = viewButton.getAttribute("data-test-id");
        viewTestResults(testId);
      }
    }

    function startTest(testId) {
      if (!testId) return;
      window.alert(`Starting test ${testId}`);
      // TODO: redirect to real test-player page
    }

    function viewTestResults(testId) {
      if (!testId) return;
      window.alert(`Opening results for ${testId}`);
      // TODO: redirect to real results/analysis page
    }
  </script>
</body>
</html>
